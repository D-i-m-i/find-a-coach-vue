(function(e){function t(t){for(var n,r,s=t[0],u=t[1],i=t[2],d=0,l=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&l.push(c[r][0]),c[r]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);h&&h(t);while(l.length)l.shift()();return a.push.apply(a,i||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,r=1;r<o.length;r++){var s=o[r];0!==c[s]&&(n=!1)}n&&(a.splice(t--,1),e=u(u.s=o[0]))}return e}var n={},r={app:0},c={app:0},a=[];function s(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-2d0c94ec":"d3fb1f46","chunk-2d212bc4":"b11871a1","chunk-3c18868a":"933bc71b","chunk-51f54ab1":"dbf5022e","chunk-551e2f5e":"efc5ada8","chunk-6e7d957e":"0c6f723f","chunk-7d2dc324":"87f838d3","chunk-e5843a26":"ea0046a7"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,u),o.l=!0,o.exports}u.e=function(e){var t=[],o={"chunk-3c18868a":1,"chunk-51f54ab1":1,"chunk-551e2f5e":1,"chunk-6e7d957e":1,"chunk-7d2dc324":1,"chunk-e5843a26":1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=new Promise((function(t,o){for(var n="css/"+({}[e]||e)+"."+{"chunk-2d0c94ec":"31d6cfe0","chunk-2d212bc4":"31d6cfe0","chunk-3c18868a":"77482b12","chunk-51f54ab1":"c304515e","chunk-551e2f5e":"d487886e","chunk-6e7d957e":"9403bc75","chunk-7d2dc324":"d78af987","chunk-e5843a26":"8b7e7912"}[e]+".css",c=u.p+n,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var i=a[s],d=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(d===n||d===c))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){i=l[s],d=i.getAttribute("data-href");if(d===n||d===c)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||c,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete r[e],h.parentNode.removeChild(h),o(a)},h.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){r[e]=0})));var n=c[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,o){n=c[e]=[t,o]}));t.push(n[2]=a);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=s(e);var l=new Error;i=function(t){d.onerror=d.onload=null,clearTimeout(h);var o=c[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,o[1](l)}c[e]=void 0}};var h=setTimeout((function(){i({type:"timeout",target:d})}),12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,o){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(u.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(o,n,function(t){return e[t]}.bind(null,n));return o},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var h=d;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"05a6":function(e,t,o){},"1c26":function(e,t,o){"use strict";o("5671")},"2cc6":function(e,t,o){"use strict";o("67bf")},"3ec8":function(e,t,o){"use strict";o("cf1f")},4360:function(e,t,o){"use strict";o.r(t);var n=o("5502"),r=(o("14d9"),{registerCoach(e,t){e.coaches.push(t)},setCoaches(e,t){e.coaches=t},setFetchTimestamp(e){e.lastFetch=(new Date).getTime()}}),c={coaches(e){return e.coaches},hasCoaches(e){return e.coaches&&e.coaches.length>0},isCoach(e,t,o,n){const r=t.coaches,c=n.userId;return r.some(e=>e.id===c)},shouldUpdate(e){const t=e.lastFetch;if(!t)return!0;const o=(new Date).getTime();return(o-t)/1e3>60}},a=(o("d9e2"),{async registerCoach(e,t){const o=e.rootGetters.userId,n={id:e.rootGetters.userId,firstName:t.first,lastName:t.last,description:t.desc,hourlyRate:t.rate,areas:t.areas},r=e.rootGetters.token,c=await fetch(`https://vue-http-demo-2-b1733-default-rtdb.europe-west1.firebasedatabase.app/coaches/${o}.json?auth=`+r,{method:"PUT",body:JSON.stringify(n)});c.ok,e.commit("registerCoach",{...n,id:o})},async loadCoaches(e,t){if(!t.forceRefresh&&!e.getters.shouldUpdate)return;const o=await fetch("https://vue-http-demo-2-b1733-default-rtdb.europe-west1.firebasedatabase.app/coaches.json"),n=await o.json();if(!o.ok){const e=new Error(n.message||"Failed to fetch!");throw e}const r=[];for(const c in n){const e={id:c,firstName:n[c].firstName,lastName:n[c].lastName,description:n[c].description,hourlyRate:n[c].hourlyRate,areas:n[c].areas};r.push(e)}e.commit("setCoaches",r),e.commit("setFetchTimestamp")}}),s={namespaced:!0,state(){return{lastFetch:null,coaches:[{id:"c1",firstName:"Maximilian",lastName:"SchwarzmÃ¼ller",areas:["frontend","backend","career"],description:"I'm Maximilian and I've worked as a freelance web developer for years. Let me help you become a developer as well!",hourlyRate:30},{id:"c2",firstName:"Julie",lastName:"Jones",areas:["frontend","career"],description:"I am Julie and as a senior developer in a big tech company, I can help you get your first job or progress in your current role.",hourlyRate:30}]}},mutations:r,getters:c,actions:a},u={addRequest(e,t){e.requests.push(t)},setRequests(e,t){e.requests=t}},i={async contactCoach(e,t){const o={userEmail:t.email,message:t.message};await fetch(`https://vue-http-demo-2-b1733-default-rtdb.europe-west1.firebasedatabase.app/requests/${t.coachId}.json`,{method:"POST",body:JSON.stringify(o)});const n=Response.json();if(!n.ok){const e=new Error(n.message||"Failed to send request.");throw e}o.id=n.name,o.coachId=t.coachId,e.commit("addRequest",o)},async fetchRequests(e){const t=e.rootGetters.userId,o=e.rootGetters.token,n=await fetch(`https://vue-http-demo-2-b1733-default-rtdb.europe-west1.firebasedatabase.app/requests/${t}.json?auth=`+o),r=await n.json();if(!n.ok){const e=new Error(r.message||"Failed to send request.");throw e}const c=[];for(const a in r){const e={id:a,coachId:t,userEmail:r[a].userEmail,message:r[a].message};c.push(e)}e.commit("setRequests",c)}},d={requests(e,t,o,n){const r=n.userId;return e.requests.filter(e=>e.coachId===r)},hasRequests(e,t){return t.requests&&t.requests.length>0}},l={namespaced:!0,state(){return{requests:[]}},mutations:u,actions:i,getters:d},h={setUser(e,t){e.token=t.token,e.userId=t.userId,e.didAutoLogout=!1},setAutoLogout(e){e.didAutoLogout=!0}};let p;var b={async login(e,t){return e.dispatch("auth",{...t,mode:"login"})},async signup(e,t){return e.dispatch("auth",{...t,mode:"signup"})},async auth(e,t){const o=t.mode;let n="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key= AIzaSyCVcgls1F71YGQLJ7Jaxn62rBo_tq3ykn4";"signup"===o&&(n="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCVcgls1F71YGQLJ7Jaxn62rBo_tq3ykn4");const r=await fetch(n,{method:"POST",body:JSON.stringify({email:t.email,password:t.password,returnSecureToken:!0})}),c=await r.json();if(!r.ok){const e=new Error(c.message||"Failed to authenticate. Check your login data.");throw e}const a=1e3*+c.expiresIn,s=(new Date).getTime()+a;localStorage.setItem("token",c.idToken),localStorage.setItem("userId",c.localId),localStorage.setItem("tokenExpiration",s),p=setTimeout((function(){e.dispatch("autoLogout")}),a),e.commit("setUser",{token:c.idToken,userId:c.localId,tokenExpiration:s})},tryLogin(e){const t=localStorage.getItem("token"),o=localStorage.getItem("userId"),n=localStorage.getItem("tokenExpiration"),r=+n-(new Date).getTime();r<0||(p=setTimeout((function(){e.dispatch("autoLogout")}),r),t&&o&&e.commit("setUser",{token:t,userrId:o}))},logout(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("tokenExpiration"),clearTimeout(p),e.commit("setUser",{token:null,userId:null})},autoLogout(e){e.dispatch("logout"),e.commit("setAutoLogout")}},f={userId(e){return e.userId},token(e){return e.token},isAuthenticated(e){return!!e.token},didAutoLogout(e){return e.didAutoLogout}},m={state(){return{userId:null,token:null,tokenExpiration:null,didAutoLogout:!1}},mutations:h,actions:b,getters:f};const g=Object(n["a"])({modules:{coaches:s,requests:l,auth:m},state(){}});t["default"]=g},"439f":function(e,t,o){"use strict";o("05a6")},5671:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),r=o("6605");const c=()=>o.e("chunk-2d0c94ec").then(o.bind(null,"591c")),a=()=>o.e("chunk-551e2f5e").then(o.bind(null,"fbee")),s=()=>o.e("chunk-7d2dc324").then(o.bind(null,"f7b3")),u=()=>o.e("chunk-6e7d957e").then(o.bind(null,"a980")),i=()=>o.e("chunk-51f54ab1").then(o.bind(null,"416f")),d=()=>o.e("chunk-2d212bc4").then(o.bind(null,"aa4b")),l=()=>o.e("chunk-e5843a26").then(o.bind(null,"212c")),h=()=>Promise.resolve().then(o.bind(null,"4360")),p=Object(r["a"])({history:Object(r["b"])(),routes:[{path:"/",redirect:"/coaches"},{path:"/coaches",component:a},{path:"/coaches/:id",component:c,props:!0,children:[{path:"contact",component:u}]},{path:"/register",component:s,meta:{requiresAuth:!0}},{path:"/requests",component:i,meta:{requiresAuth:!0}},{path:"/auth",component:l,meta:{requiresUnauth:!0}},{path:"/:notFound(.*)",component:d}]});p.beforeEach((function(e,t,o){e.meta.requiresAuth&&!h.getters.isAuthenticated?o("/auth"):e.meta.requiresUnauth&&h.getters.isAuthenticated?o("/coaches"):o()}));var b=p;function f(e,t,o,r,c,a){const s=Object(n["E"])("the-header"),u=Object(n["E"])("router-view");return Object(n["w"])(),Object(n["h"])(n["a"],null,[Object(n["k"])(s),Object(n["k"])(u,null,{default:Object(n["N"])(e=>[Object(n["k"])(n["c"],{name:"route",mode:"out-in"},{default:Object(n["N"])(()=>[(Object(n["w"])(),Object(n["f"])(Object(n["F"])(e.Component)))]),_:2},1024)]),_:1})],64)}const m={key:0},g={key:1},j={key:2};function O(e,t,o,r,c,a){const s=Object(n["E"])("router-link"),u=Object(n["E"])("base-button");return Object(n["w"])(),Object(n["h"])("header",null,[Object(n["i"])("nav",null,[Object(n["i"])("h1",null,[Object(n["k"])(s,{to:"/"},{default:Object(n["N"])(()=>[Object(n["j"])("Find a Coach")]),_:1})]),Object(n["i"])("ul",null,[Object(n["i"])("li",null,[Object(n["k"])(s,{to:"/coaches"},{default:Object(n["N"])(()=>[Object(n["j"])("All Coaches")]),_:1})]),a.isLoggedIn?(Object(n["w"])(),Object(n["h"])("li",m,[Object(n["k"])(s,{to:"/requests"},{default:Object(n["N"])(()=>[Object(n["j"])("Requests")]),_:1})])):(Object(n["w"])(),Object(n["h"])("li",g,[Object(n["k"])(s,{to:"/auth"},{default:Object(n["N"])(()=>[Object(n["j"])("Login")]),_:1})])),a.isLoggedIn?(Object(n["w"])(),Object(n["h"])("li",j,[Object(n["k"])(u,{onClick:a.logout},{default:Object(n["N"])(()=>[Object(n["j"])("Logout")]),_:1},8,["onClick"])])):Object(n["g"])("",!0)])])])}var k={computed:{isLoggedIn(){return this.$store.getters.isAuthenticated}},methods:{logout(){this.$store.dispatch("logout"),this.$router.replace("/coaches")}}},v=(o("439f"),o("6b0d")),y=o.n(v);const w=y()(k,[["render",O],["__scopeId","data-v-0ec0d73d"]]);var I=w,q={components:{TheHeader:I},computed:{didAutoLogout(){return this.$store.getters.didAutoLogout}},created(){this.$store.dispatch("tryLogin")},watch:{didAutoLogout(e,t){e&&e!==t&&this.$router.replace("/coaches")}}};o("e976");const S=y()(q,[["render",f]]);var _=S,L=o("4360");const E={class:"card"};function A(e,t){return Object(n["w"])(),Object(n["h"])("div",E,[Object(n["D"])(e.$slots,"default",{},void 0,!0)])}o("2cc6");const N={},C=y()(N,[["render",A],["__scopeId","data-v-595a6b5e"]]);var T=C;function x(e,t,o,r,c,a){const s=Object(n["E"])("router-link");return o.link?(Object(n["w"])(),Object(n["f"])(s,{key:1,to:o.to,class:Object(n["s"])(o.mode)},{default:Object(n["N"])(()=>[Object(n["D"])(e.$slots,"default",{},void 0,!0)]),_:3},8,["to","class"])):(Object(n["w"])(),Object(n["h"])("button",{key:0,class:Object(n["s"])(o.mode)},[Object(n["D"])(e.$slots,"default",{},void 0,!0)],2))}var F={props:{mode:{type:String,required:!1,default:null},link:{type:Boolean,required:!1,default:!1},to:{type:String,required:!1,default:"/"}}};o("d143");const P=y()(F,[["render",x],["__scopeId","data-v-cc1c3a28"]]);var R=P;function J(e,t,o,r,c,a){return Object(n["w"])(),Object(n["h"])("span",{class:Object(n["s"])(["badge",o.type])},Object(n["I"])(a.text),3)}var U={props:["type","title"],computed:{text(){return this.title.toUpperCase()}}};o("1c26");const $=y()(U,[["render",J],["__scopeId","data-v-bb773a86"]]);var D=$;const G=e=>(Object(n["z"])("data-v-5147169a"),e=e(),Object(n["x"])(),e),B={class:"spinner"},M=G(()=>Object(n["i"])("div",{class:"lds-roller"},[Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div")],-1)),z=[M];function H(e,t){return Object(n["w"])(),Object(n["h"])("div",B,z)}o("3ec8");const Q={},V=y()(Q,[["render",H],["__scopeId","data-v-5147169a"]]);var Y=V;const K=Object(n["l"])(()=>o.e("chunk-3c18868a").then(o.bind(null,"ae92"))),W=Object(n["e"])(_);W.use(b),W.use(L["default"]),W.component("base-card",T),W.component("base-button",R),W.component("base-badge",D),W.component("base-spinner",Y),W.component("base-dialog",K),W.mount("#app")},"64c1":function(e,t,o){},"67bf":function(e,t,o){},cf1f:function(e,t,o){},d143:function(e,t,o){"use strict";o("de6e")},de6e:function(e,t,o){},e976:function(e,t,o){"use strict";o("64c1")}});
//# sourceMappingURL=app.bfa41669.js.map